<script>
    // 1. Your Sheet ID from the screenshot
    const SHEET_ID = '12eyXAI9-hT0TFSx2HhVDUWHXo4X9QVT-vSPmGQBx6c8';
    
    // 2. The JSON endpoint (Works better for GitHub than CSV)
    const SHEET_URL = `https://docs.google.com/spreadsheets/d/12eyXAI9-hT0TFSx2HhVDUWHXo4X9QVT-vSPmGQBx6c8/gviz/tq?tqx=out:json`;

    async function loadFootage() {
        const grid = document.getElementById('footage-grid');
        const statusText = document.querySelector('p.text-gray-400'); // Selects your loading text

        try {
            const response = await fetch(SHEET_URL);
            const text = await response.text();
            
            // Clean Google's JSON wrapper
            const json = JSON.parse(text.substring(47).slice(0, -2));
            const rows = json.table.rows;
            
            grid.innerHTML = ''; // Clear loading text

            rows.forEach((row, index) => {
                if (index === 0) return; // Skip header

                // Column Mapping based on your screenshot:
                // Col B(1)=Title, Col C(2)=Category, Col E(4)=Thumbnail
                const video = {
                    title: row.c[1] ? row.c[1].v : "Untitled",
                    category: row.c[2] ? row.c[2].v : "General",
                    thumb: row.c[4] ? row.c[4].v : "",
                    price: "10.00" // Placeholder price
                };

                const card = `
                    <div class="video-card group cursor-pointer overflow-hidden rounded-lg bg-gray-100 shadow-sm transition-hover hover:shadow-md">
                        <div class="relative aspect-video">
                            <img src="${video.thumb}" alt="${video.title}" 
                                 class="object-cover w-full h-full transition-transform duration-500 group-hover:scale-105"
                                 onerror="this.src='https://via.placeholder.com/600x400?text=Image+Access+Error'">
                            <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                <span class="bg-white text-black px-4 py-2 rounded-full text-xs font-bold uppercase tracking-widest">Preview</span>
                            </div>
                        </div>
                        <div class="p-4 flex justify-between items-center bg-white">
                            <div>
                                <h3 class="font-semibold text-gray-800">${video.title}</h3>
                                <p class="text-[10px] text-blue-600 font-bold uppercase tracking-widest">${video.category}</p>
                            </div>
                            <span class="font-bold text-gray-900">$${video.price}</span>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        } catch (error) {
            console.error("Error loading sheet data:", error);
            if (grid) grid.innerHTML = `<p class="col-span-full text-center py-10 text-red-500">Database Connection Error. Check Sheet Sharing.</p>`;
        }
    }

    loadFootage();
</script>
